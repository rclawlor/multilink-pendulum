function [Y,Xf,Af] = dynamics(X,~,~)
%DYNAMICS neural network simulation function.
%
% Auto-generated by MATLAB, 15-Mar-2023 11:26:29.
% 
% [Y] = dynamics(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 10xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.999999999759212;-0.999999999900484;-0.999999987113994;-0.999999995271437;-0.599999722519461;-0.59999908112796;-0.638780638339966;-0.599949236078549;-0.599914660352014;-0.63933100324512;-0.437402317378898];
x1_step1.gain = [1.00000000052544;1.00000000021107;1.00000000722491;1.00000000254505;1.66666782266027;1.66666921089163;0.904872144880225;1.66690081532758;1.66684180211303;0.904689209566122;1.41368670729948];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.5284362594792568757;-1.5353650318557039434;0.88857294965509503459;0.49012521649784979161;-0.45994641337944097703;0.20362151627813851462;-0.13838932278517895869;-0.28142283035723242302;0.22392368075362731328;-0.29903454281523661473;-0.18250379773539945893;-0.86470875853680861933;0.76926805260569997014;-0.7268613029051549379;-1.6477778455423610637;-1.3402922325570545414];
IW1_1 = [-0.64009812558935708093 0.056933746281270465606 0.12648226268578291465 -0.88021004164088501032 -0.1770422520599682914 0.61415732257887656331 0.2545669067553461562 0.44701704081093174281 -0.1786806337396210087 0.083881965159913002283 -0.0063048105902433785805;0.066997988734265045974 0.61321645212025066574 -0.44222965671627778583 -0.35698062616865011698 0.22622666835147320352 -0.3595348159269224908 0.13123744569928391668 0.33643827923710967198 -0.13435922125384142101 0.61055720038649730075 0.0031737014145204948783;-0.55811345522156430299 -0.24141265237493639284 0.40876057452494907185 0.52106768961885852054 0.28404836938765609666 0.0043166383174480195059 0.4049906036063420367 -0.091516597844068167666 0.45001267600104533084 -0.18725439542550986749 0.0073659242468733640216;-0.5809189868782445032 0.51010370309827357538 0.51794016524667885193 -0.20920562666594055834 -0.23456940876423404418 0.17744691375126750432 0.5871462199058895548 -0.44621277933739195154 -0.41906966832420650126 -0.41130734786783285095 0.010340660305018286452;0.35382084221379067612 0.54777267028558407347 -0.0020305309740602469661 0.30052995374496926928 -0.13907317645310054988 -0.63995417860176151414 0.052234715961805615325 0.08947569480013689569 -0.15540725806348068549 0.090987213234949113061 -0.001818034037315097249;0.30049140399517776379 0.23521924700417773391 0.11494723213963839448 0.4202837205187261449 0.71265535392742751508 -0.45653369642726143729 0.76644522175838014633 -0.06341530234909122099 0.1908463962477814635 -0.37620760888946580547 0.0088374901531813512129;0.2586565449379006898 0.53417088344399510369 -0.080072334259446278915 -0.50195140930902348853 0.29799553593811722862 -0.46885774340948122019 -0.51457221547873832623 0.061276374649001423556 -0.38242077222218967547 0.83972496063036083935 0.0044021432830625237959;-0.5644044666655457787 0.22311991982690015934 0.67884102053023598344 -0.098807599006973084732 0.17963522323319833229 0.11206962826676372669 0.37341932961574647587 0.26008559479537690651 0.17711166482583445836 -0.31437073187015984743 -0.0032649524816410523467;-0.41518184383624284761 -0.37947406754054235911 0.59852455032823026482 0.28616426691185048448 0.39060378479704666033 0.040293109061352465339 0.39449794284729733373 0.14166792329255925575 0.099399080997483485467 0.15671243785662719583 0.00041110232286542774775;-0.34735746104353604213 0.011499015057640771947 0.78533052251659329901 -0.051080157065055573073 0.62310002355748594915 -0.35180563627095245982 -0.15916579681661732759 0.67364184986592212656 -0.11184805768002543946 0.26714393971617050871 -0.0037494068641398025157;0.21787669893329073001 -0.2049893725891246965 0.050744997102314455539 -0.061892790265451483323 0.41504015093889529142 -0.29514758909854693636 -0.38728212142564805154 0.31707286245261873114 -0.20511744550185737057 -0.1894277888371916907 0.0017148506179792315576;-0.14475276190807392918 -0.027668423456021894874 0.05829682471096386126 -0.066748224048730223079 -0.2977100287571555759 0.051019664515978349617 0.23000603217563686531 -0.42840043460152188448 0.21700935041803132153 0.35289426705519538752 0.0018843311285633966307;0.22868052211193906631 0.050200734561448336069 -0.29502476472230121374 -0.59746291095424786111 -0.40249963987791242959 0.063204877872961931495 0.67862273640597625679 0.015759273929892392979 -0.37247339268718970828 -0.31181433726672275197 -0.0010535693561460957642;0.23155489640850110411 -0.12679552432327104161 0.19093157775225252926 0.44036148331876995288 -0.0024020616292454825824 -0.02650012427329666298 0.29484904309536019706 -0.55199164024307134646 -0.3243699559871874305 -0.058832060828475279957 0.011506074230542421774;-0.11673598011141994579 0.09515217583291224468 0.023465416485347129899 -0.88961288424870821334 -0.62788212180612956725 0.55858818381346442283 0.44868007759027345172 0.28052076285779298237 -0.57864025027439014437 -0.32394690164968165114 -0.0042409866877949082414;-0.47016257096108071689 0.63637000711145108589 0.11125165054459650038 -0.4959913862628525516 -0.018734450814119507633 -0.21591291953684671467 -0.67932717081735638498 0.38760774048771901024 -0.1926415798573306859 0.59058500829855264946 -0.0028819493652941399579];

% Layer 2
b2 = [1.3666708017691300281;-1.1610495343405280444;-1.0845491655757326654;0.70920458124287855117;-0.66851098231014616236;-0.46116912377070234941;-0.54095523129400779894;-0.56769100881838818751;-0.37299134934669209152;-0.49325127715221411817;0.64408170568035383319;0.69611208873602614666;1.0622281323311379975;-0.99985331674680000269;1.5116465746269964754;1.5763785985413742985];
LW2_1 = [-0.056407550390032284993 0.46960567699423838572 -0.41333856553813830281 0.23204560156721393271 0.11547886970492156344 -0.066496301094447318736 -0.14159857111902213189 -0.49417768117816895934 -0.030524151652151627206 0.24077733954043983866 -0.43853683949878369264 0.90706101692324425656 0.33187976351878301084 0.44765732747719050311 -0.55199567839694807514 -0.28218111443208909739;0.69481659470076628793 0.34954225086197288075 -0.79592173379626862673 -0.32673937406882797019 -0.29125888425657397995 0.90696043345965815519 -0.65624134231593311828 0.16338486048087158542 -0.41485385101923732964 -0.77690161633270904407 0.074129376631611273996 0.075490854040890134624 0.5666169834387018156 -0.12290479570106620233 0.22401754642557544783 0.2499208334657491426;0.19665585104005442463 0.20859128976326252181 0.36178110921171990899 -0.38193704493826785562 0.37632438285709507442 -0.46517715890975697146 -0.12574837426332602375 -0.060678322170244811118 0.58290653500483946559 -0.54239647046940298036 0.36910232987029628626 -0.58444585898669210167 -0.24631287518993874586 0.36144816433333160077 0.17862839345077413666 -0.14626309585308519545;-0.55984116723512955538 -0.27325580890270789736 0.30932112053459714929 -0.20318807277698183733 -0.24565928640398490557 0.12300281951109581779 0.0242596471296166738 0.035102826944711354451 -0.7882934800976935108 0.23465116965835022822 0.053983407790631460221 -0.32763767641717267409 -0.59105925462722541663 -0.057404195065826668642 0.4774306756337485802 -0.32954603747907201816;0.70346638024964880387 -0.10496496817350908781 -0.16691409204392024246 0.003519052477869792292 0.03380555155185201166 0.5470021938633439218 -0.074889275298228211164 -0.51922243263025813498 0.3800862938735067309 0.26538244430279028796 0.082628377459145418982 -0.30266156918386294405 -0.224275518661294887 0.060659724218462045264 -0.018665518236546621567 -0.030567051894168358744;0.36884031481311824185 0.046415366477279562663 0.49525379832081201092 0.28417217067966749067 0.31917174193612468658 -0.42841538533757844709 0.88027991446743214521 0.32287257850740552767 0.023431827974510051338 -0.34069583129805064425 -0.10966546608844228439 -0.12934308945612990605 0.24384691963083221511 -0.23125921322951117909 0.29543687096933152203 0.95200017262593994438;-0.24863442303440860814 -0.48500163812514907047 -0.095013957172472976453 -0.12440216851018218169 0.17839971002181534421 -0.23066740072279032225 0.50103471815758549024 0.3737296899530294092 0.34646729228936701261 -0.079358508526621962531 0.10470444228746733639 0.69997231168096740728 0.34319380365357887719 0.063189298164431001448 -0.035862198298604000546 -0.37016649608641910563;0.77438102957287757722 -0.3040988724836869439 -0.0041550313014505181955 0.13171898381873359263 -0.1483621715858724488 -0.4792530850283489019 0.053661468806406972809 -0.43655858293288801741 -0.15260955521355576425 -0.10822201835139035053 0.18976144934672350972 0.66628504005314392877 0.41924667363311046708 0.14465848263328928702 0.075038920066006889464 0.45948390564282137749;-0.91762929306717289091 0.16051978582766573966 -0.25847100968482522587 0.054121646665803192777 -0.33743243923005283857 0.30874450181115414837 -0.63919082561977591528 -0.12030407410685972636 0.38937281161648107375 -0.077584519617460517837 0.030503276329478083012 -0.33291537499759671359 0.41344530125160383616 -0.42036746313829054245 -0.15671502131102346689 -0.28550838114993476458;-0.82051477014245088881 -0.68198452672070286606 0.39611219560012800311 -0.39879836878539703937 0.47900737820470767891 0.62649547375152425666 0.60870530266921996088 -0.037190123123130254534 -0.15506922164866165925 0.089407761650596773162 0.37509655463350738414 -0.74857684567667059916 -0.64428144382725316408 0.3088235569989034035 0.40778052749497301077 -0.24205609846147332909;0.53777224025121028728 0.46604916045283334425 0.56033304203911671326 0.66497259738068970059 -0.88191254911893357527 -0.0098949931662587597286 0.26815666697298828902 -0.028480700393932110309 0.45711411543008079184 -0.3688015848005490871 -0.11182021141674426679 0.31759650077979312277 0.42126031695678417544 -0.17994252264990326373 -0.35948436152282375877 0.016588491941967091481;0.23006860400398956856 -0.58842696250213188947 0.27969811542489719791 -0.2550928840841096279 0.64485028770441088497 0.019278077368233406674 0.63434932047521741527 0.27449242760296088672 0.081085415806051344689 -0.16642400226637121818 -0.036142643289214800018 -0.40322350623633368416 0.10076151222646126393 0.037042819133877746829 -0.20991908485545504592 0.69393002565279215954;0.14809195431957941635 -0.27380026623411268805 -0.065019103889711923894 0.061775863742950472279 -0.3647871790027675809 0.17856473054211322027 -0.19399941837220344154 0.53579968573482117389 0.34005576744774151932 -0.31397143263912463684 0.05590591013479796062 1.0334541883567649467 -0.048113958441910187336 -0.32479224426879971244 -0.086520073755252155379 -0.021141589139169057049;-0.055785097584523726799 -0.52003091062349970919 -0.66072524368876206502 -0.39376638457909118873 -0.22225638543321110663 -0.36487269309875774992 0.4948948911463065814 -0.31641575590084758396 0.73804682570086188598 0.68755217565144888248 -0.41694016959937590938 0.31659576385560256329 -0.40395210802081582546 0.38506464695651099195 0.45889936540914816332 0.33873828901139185765;0.45789100193796794525 -0.55489720191360158985 -0.52018442955198374023 -0.080632200367273157426 0.48869328434748038337 -0.43478634922908382388 0.12568842202359498117 0.13416667070331445011 -0.33633625567107555687 0.28300467449636113049 0.08140292627921320856 -0.40017067592155813882 -0.00035320649430218940953 -0.48649466594021611998 -0.51988257741608434603 -0.62920765448534055064;0.0065598620461093789732 0.39985105600251452662 -0.29811909436442929344 0.55166276190647267619 -0.56869823409103825718 -0.38718382029465481242 -0.915062642485787614 0.22833992738048267124 -0.42311109962759252401 -0.12409436251962549513 0.053081542375494290831 -0.28633004567890746328 0.46333878469070105544 -0.1724656656865578841 -0.060421441827879868169 0.63097570657335233513];

% Layer 3
b3 = [1.8500519866532851854;1.35754085593573115;-1.2633874459975507065;1.0234382918724356237;0.60964093654563766833;0.62177137996912201778;-0.5606561900832768286;-0.33940307088389648493;0.0041484072138708990782;-0.40827679486476869952;0.52720913635669919284;-0.81058866936162321526;0.64638067880544436417;-1.3530570439412052952;1.2626089226321610681;-1.7109330433773499713];
LW3_2 = [-0.29841109869177573355 0.88426463918984643531 0.19282978876494205611 -1.0494112301606339788 0.89490313163435675214 -0.21983375914061834 0.4633112339457433615 -1.1007111089290366746 -0.021746274777927256799 -0.2534482374662828108 0.053898821463193254122 0.049543766571790090469 -0.14906097109082100394 -0.42384063670367866372 -0.20677205665004383395 0.073114170005914289052;-0.8449314139273648161 -0.56721005884626574112 0.30545696253275950172 1.223292644282099495 0.29091979706578213749 0.53064856635104218352 0.7865958428882936504 0.24902213507732826048 -0.12179262112513000726 -0.49789547470070050217 -0.49200734412479735225 0.39369118429468397125 -0.35865719932096262745 0.12782052541502275655 0.42664944307263563683 0.51101684283993387137;0.15212426010441876256 -0.57695979369917693713 0.30738244688022747786 -0.48080986735875125282 -0.36413447129763509835 -0.65732250978226525184 0.16266734247232686461 0.13098317287208577353 0.50220352915256993853 0.18025650587475552933 -0.25802720862005507074 -0.36791524307162304375 0.44818154205258864398 0.64363717699514733095 -0.12658420900985692392 -0.39010656066383797569;-0.28709748068879475946 0.21453428311536143491 0.43400432262986066156 -0.072341107789760189517 -0.46001443773579697716 0.77906878614488117574 -0.5892013971171708997 0.37908232634245725423 0.3519673343491203088 -0.02318916816889981386 0.09990788333522242215 -0.42434715703502534634 0.12524676507373766476 0.54582822302795663827 -0.71096150500955457296 -0.11661149931938175062;-0.64398821838148845309 0.55960278208424285573 -0.62689332556301069488 0.45162201182796452015 0.081792247042773616461 -0.06444157781384646233 -0.91398762023889590367 -0.26794792514006809947 -0.15746076247542289961 -0.66836127095820541122 -0.15007171286950909961 0.65999717901830401434 0.07966348485033948601 0.42302769838212095355 -0.58593680146645621409 -0.08642657648126741976;-0.85614615924554526849 0.13717570436498410791 -0.29873609226092784352 0.0099315901736065151373 0.38774663725513730528 0.36426010609252168493 0.10977210016417758565 0.73610738523361884944 0.57734461270605319516 0.16305968179708621446 0.11066368812492197171 0.69130424763184850079 -0.15552487706373110954 0.29833223625834054404 0.056715770798222889248 -0.29537416765906210347;0.097222131600791544814 -0.40838287037666859414 -0.15842647120999459043 -0.067434712866602325443 -0.48237684144656722829 -0.015492045173282453785 -0.57761210255500505806 0.2820809566090030085 0.40797337347846784894 0.19858734774443845272 -0.0068703999541782946603 -0.094560727384607620727 -0.13718501992276735391 0.79348218155731864432 0.35247104891577119012 0.062198853394216567503;0.17133836905727825584 -0.21618173199648726968 0.8513999959876119572 -0.36743934770926184319 0.35592323700087247218 -0.57741655492490084889 0.14259933106949446158 0.12015189803581588501 -0.12659514951026182294 0.63628983291156115953 0.2124543802480542698 -0.56247715288495148123 -0.82172549339518463629 0.001666961420485052383 0.41170495687860625411 0.024115065469831695882;-0.38037867459401147885 -0.82618435979933635416 0.31081213589910905437 0.10665585531965925126 0.30502469317305858088 0.62317965653481643962 0.36157040915765770173 -0.29288779718358987081 0.52892430058323525177 0.17023760000564619466 0.23232140846405613388 0.36357691535621994294 -0.073975200254305262249 0.51000846747762407229 0.39487594995422781174 -0.16829651492474168029;-0.56144445411775756316 -0.05521914326018849406 0.034843658782225096771 0.042865532699636992031 0.18330224479217804845 0.64714650463358791566 0.07825149947940923667 -0.32732055185273739584 0.02455290651811068911 -0.32789915502748440135 0.12063232827625353094 -0.10373672988419382901 0.85816767031624008322 0.27158925768263614264 0.41126210900720872043 -0.070253099461992152275;0.60254407035329948794 -0.50388840165263615312 0.48737587373577512251 -0.57440391771548726663 0.46478182375034832186 0.18914121002578659914 0.61478482508684761942 0.32187718211297650095 0.24590321844792201178 -0.20977959123462483482 -0.46907593074064601879 0.41705236232310227695 0.72840817672239754899 0.64448796660600493613 0.1333668723276390522 0.43845274528727856689;0.076708604619681888814 0.90715583813149802683 -0.88201819716754492617 -0.47481513785653478577 0.39972735092075573071 0.046999613499437979669 -0.28380221586316084492 -0.522501512280567737 -0.44841453038015766097 -0.26088214870109188714 -0.073964219150708374051 0.35540630168533493549 -0.053828940864243057796 -0.066644093402645487867 -0.089574603656274967567 -0.39061324490481397209;0.37469191038235916125 0.33718100979597209754 0.56775585134684025679 -0.14551914755990394412 0.62868633806087648175 0.016974284404669359727 -0.77793220028642795505 -0.0071623594773403348804 0.38669032396626457082 -0.72064547264047829067 0.57742229900484309812 0.66455631002440540556 -0.33108049785299564771 0.83175697382536684099 -0.32605283866354090039 -1.2263249278573027379;-0.60112509983097006661 -0.40347318582956875899 0.044759532531946207012 0.052068027124516060022 0.48795047932692547921 -0.49230219488085563695 -0.46025860418119801665 0.65355168576330802122 -0.80103683309795847833 0.10627981441626545289 -0.22338752868493774728 -0.63309088595684648304 -0.10342292389556329013 -0.34321196319171481948 0.22773783107759590361 0.63723023508846343699;-0.040488764256831025201 0.39811080469576742846 -0.19302396176078998047 0.3768934337133852952 0.02397889422852689939 0.46623070679604461386 -0.40793994077317169422 0.79474332698552163645 0.32076189303798263719 -0.14096734486065776171 -0.79989848501998583874 0.79940684910919246331 0.019297649022214570513 -0.015595748279894770111 0.42526528442650296524 -0.09876240098452040983;-0.048922462940359880135 0.22630927743678333486 -0.65786126984986892374 0.15036343094140658394 -0.48394248942496065347 0.29394008826726764072 -0.51873651634239392738 0.16473210585309286391 -0.077293690972506406967 0.62446409703633953825 0.60450955437208864218 -0.83812687358460724596 -0.51728904104420669885 0.41490936432308206383 0.27808270260424233777 -0.011304623398112173191];

% Layer 4
b4 = [-0.59847767985583499861;-0.7831969112290245727;0.3372723630047274046;0.12661054359913787026;-0.66071955909853163913;-0.17862428021610307627;-0.33864957763947278746;1.0746305814694603331;-0.095773108733362907752;-0.47464917237326859079];
LW4_3 = [-0.18171482277921111037 -0.48319641986260397637 0.083277478724975859126 -0.49343497493127708164 0.13946907225876786773 -0.047790191394237166445 -0.008611695060088540854 0.61326551100561454977 -1.1628709337412888036 -1.3774598955111463372 0.24119868641854447233 0.041690888679050297494 -0.34534008554855144535 -0.5437500898123913684 0.59248226043754570469 -0.010804865246317626321;0.19219832374381293216 0.49599943982346000881 -0.16774930943077964729 0.47719005424797805714 1.2666275605216452682 -1.2402710454265490903 0.24152538374028040269 0.028784451007460271077 0.058555127055953226645 0.14565266786304575941 -0.55213900305113805533 1.5853201700135197694 -0.62926197554390916888 -1.0764289031402223262 0.19350276238589506073 0.010182440565402146176;-0.78883085011725673219 -0.35937083322824603382 0.15665220493927833889 -0.79275722667389514342 0.11523698945841397145 -0.80155072021089646128 0.86212216934344942931 0.67333538371480072815 -0.68145868961561772981 -0.33738415288729639574 1.3097036775680919174 0.020636709897148719506 -0.96628028619523509413 0.016935401594115981339 0.015897744788693771861 0.27116436855531633743;0.024326276774111810219 -0.33594885506420757437 -0.077821967659044213872 0.60772796533004203035 0.68498026415535684386 -1.8623255702984053972 -0.37937103536873728604 0.72132580967082970957 0.40393603296777741418 0.38546304644277268325 -0.82865715563529762644 -0.26279724423594735816 0.56053469378232934073 -0.61642988137418752714 0.55150841892121660326 0.03385923791058095822;0.52567621388444518704 0.24733896102844069032 -0.2132673937776223827 -0.75420679151219716108 -0.04141998495680714043 0.58380927820135408712 -0.3027039037353868034 0.71006319690242647447 0.75980340814000624228 0.7413382391301518437 -1.1784237487009989742 0.214797002282755084 0.81699794079303156291 0.08490586340024966483 0.77555204979456182635 -0.31040327993915162175;0.23592527248180628074 0.049257536468369306215 -0.55574153533438475083 -0.098604088579355528288 0.67938277880533182174 -1.6160401045225516459 0.61666683464161042849 0.959019380225042406 0.21680328517649061215 0.43244881555274772289 -0.74580113411496229414 0.12238180812239915496 0.35145875145570093512 -0.59368137172893886699 -0.51238986117080942417 -0.48324672506294963359;0.38964774668666701807 -0.14767499032074751786 0.16318108487968230325 -1.130580268045074499 -0.59413759559247181219 0.23784378062009856047 0.33339797957384731397 0.23777295177191273834 0.014549158120615595172 0.17511175163234354857 0.48998268739301131802 0.91305604822961783373 0.18990821405025765101 -0.33780412519818936445 -0.86511289755818920888 -0.76485526869610420686;0.75763056346896118232 -0.12382555455013351253 0.78253604117821928821 -0.69878132274473681029 -1.1198020247298270391 -0.014771714367705112911 0.38994815650081848801 1.3304773423361198059 1.1760484684023713164 0.20676364846703612632 -0.68398605668532230784 -1.0109385032293523032 -1.5964225414728738794 -1.4823740498238815455 0.049175856571291434727 0.50643333636367560135;-1.6171041667191674573 1.067758768114744905 0.68274100659760794674 -0.60472329603292573896 0.14692695946453446232 0.79530349730654170681 0.24660419724741242109 -0.35542469903632528672 0.13834693862900890315 0.14667670218694653372 -0.17698704182869337553 -0.022522607588841794812 0.94389890814529020524 -1.9847530622548579249 -0.26147228842353281708 -0.05881454527951993777;0.19329379338845892322 -0.62141604696483554449 0.66317940321060064868 -0.035138776878782175539 -0.64210254006264522175 -0.0014846559055662553184 -0.99715519691650933432 -0.60883456405476787943 0.23573430849061866033 0.0068629005848197715059 0.33941479036887833853 0.35518170296987872092 0.50518665167260878857 -0.38278138034978831383 0.25466679776071327046 -0.35622626923735878357];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.00000000052544;1.00000000021107;1.00000000722491;1.00000000254505;1.66666782266027;1.66666921089163;0.903658660996291;1.64944056082671;1.63379423728296;0.903531713820512];
y1_step1.xoffset = [-0.999999999759212;-0.999999999900484;-0.999999987113994;-0.999999995271437;-0.599999722519461;-0.59999908112796;-0.638780638339966;-0.612650125543444;-0.599914660352014;-0.63933100324512];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
